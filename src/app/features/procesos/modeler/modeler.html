<div class="canvas-container">

  <!-- PALETA DE NODOS -->
  <div class="palette">
    <button (click)="addNode('start')">Inicio</button>
    <button (click)="addNode('activity')">Actividad</button>
    <button (click)="addNode('gateway')">Gateway</button>
    <button (click)="addNode('end')">Fin</button>
  </div>

  <!-- LIENZO -->
  <div class="canvas">

    <!-- LÍNEAS SVG -->
    <svg class="lines">

        <line></line>
    *ngFor="let c of connections"
      [attr.x1]="(nodes.find(n => n.id === c.from)?.x || 0) + 75"
      [attr.y1]="(nodes.find(n => n.id === c.from)?.y || 0) + 25"
      [attr.x2]="(nodes.find(n => n.id === c.to)?.x || 0) + 75"
      [attr.y2]="(nodes.find(n => n.id === c.to)?.y || 0) + 25"
      stroke="#333"
      stroke-width="2"
        stroke="#333"
        stroke-width="2"

      />
    </svg>

    <!-- NODOS -->
    <div *ngFor="let n of nodes"
         class="node"
         [ngStyle]="{ left: n.x + 'px', top: n.y + 'px' }"
         cdkDrag
         (cdkDragMoved)="onDrag($event, n)">

      <div class="node-content">{{ n.label }}</div>

      <button class="connect-btn" (click)="selectedNode ? connect(selectedNode,n) : selectedNode = n">
        ●
      </button>

    </div>

  </div>

</div>
